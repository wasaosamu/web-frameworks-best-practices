# 第21章：組み込み関数（map, filter, zip）

**この章の目標**  
**map**、**filter**、**zip** の使い方を学びます。  
リストやイテラブルを効率よく扱うための、実務でよく使う組み込み関数です。

---

## map とは？

**map** は、**各要素に同じ関数を適用**して、新しいイテラブルを作ります。

```python
# 各要素を2倍にする
numbers = [1, 2, 3, 4, 5]                    # 元のリスト
doubled = list(map(lambda x: x * 2, numbers))  # map: 各要素に lambda を適用し、list に変換
# [2, 4, 6, 8, 10]

# 関数を渡す場合
def double(x):
    return x * 2                              # 2倍して返す関数
doubled = list(map(double, numbers))          # 関数オブジェクトを渡すこともできる
```

- **map(関数, イテラブル)** の形  
- 結果はイテラブルなので、**list()** でリストにすることが多い  

---

## リスト内包表記との比較

```python
numbers = [1, 2, 3, 4, 5]

# map を使う場合
doubled = list(map(lambda x: x * 2, numbers))  # map で各要素を2倍

# リスト内包表記（同じ結果）
doubled = [x * 2 for x in numbers]             # 内包表記で同じ処理を記述
```

- 簡単な変換なら**リスト内包表記**の方が読みやすいことも多い  
- 既存の関数をそのまま使いたいときに **map** が便利  

---

## filter とは？

**filter** は、**条件に合う要素だけを残す**イテラブルを作ります。

```python
numbers = [1, 2, 3, 4, 5, 6]

# 偶数だけ残す
evens = list(filter(lambda x: x % 2 == 0, numbers))  # 条件が True の要素だけを残す
# [2, 4, 6]
```

- **filter(条件を返す関数, イテラブル)** の形  
- 条件が True の要素だけが残る  

---

## zip とは？

**zip** は、**複数のリストを1つずつペアにして**まとめます。

```python
names = ["山田", "佐藤", "鈴木"]
ages = [25, 30, 22]

# ペアにする
pairs = list(zip(names, ages))     # 同じインデックスの要素をタプルでまとめる
# [("山田", 25), ("佐藤", 30), ("鈴木", 22)]

# for で回す
for name, age in zip(names, ages):  # zip で2つのリストを同時にイテレート
    print(f"{name}: {age}歳")       # f文字列でフォーマットして出力
```

- 長さが違うときは、**短い方に合わせて**止まる  

---

## まとめ

- **map**：各要素に関数を適用する。
- **filter**：条件に合う要素だけ残す。
- **zip**：複数のリストをペアでまとめる。
- どれもイテラブルを返すので、**list()** でリストにすることが多い。
