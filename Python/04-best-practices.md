# 第4章：ベストプラクティスまとめ

**この章の目標**  
Python で、読みやすく保守しやすいコードを書くための**考え方**をまとめます。  
命名規則、コメント、エラー処理などを、初心者向けに整理します。

---

## 変数・関数の名前の付け方

**分かりやすい名前**を付けると、コードの意図が伝わりやすくなります。

- **変数名**は、小文字とアンダースコア（`user_name`、`item_count`）  
- **関数名**も同様（`get_user`、`calculate_total`）  
- **定数**（変わらない値）は大文字（`MAX_COUNT`、`API_URL`）  

```python
# よい例（役割が分かる名前）
user_name = "山田"           # ユーザー名であることが明確
item_count = 10              # アイテムの件数であることが明確

def get_user_by_id(user_id): # 関数名で「IDからユーザーを取得」と分かる
    pass                     # 未実装（プレースホルダ）

# 避けたい例（何を表しているか分かりにくい）
a = "山田"                   # 何のデータか不明
x = 10                       # 何の数値か不明
```

---

## コメントを適度に書く

**なぜそう書いたか**が分かるコメントがあると、あとで読み返したときに助かります。

- 複雑な処理にはコメントを付ける  
- 一目で分かる処理には、コメントを付けすぎない  
- **何をしているか**より、**なぜそうしているか**を書くと役に立つ  

```python
# ユーザーが20歳以上かどうかをチェック（法律に基づく）
if age >= 20:                # 年齢が20以上か判定
    allow_purchase = True    # 購入を許可するフラグを立てる
```

---

## 1つの関数は1つの役割に

**1つの関数**は、**1つのこと**だけをするようにすると、読みやすくなります。

- 長くなりそうな処理は、小さな関数に分ける  
- 関数名を見れば「何をするか」が分かるようにする  

```python
# よい例：役割が分かれている
def validate_email(email):   # メール形式の検証だけに専念
    return "@" in email      # @ を含むかどうかで簡易チェック

def save_user(name, email):  # ユーザー保存だけに専念
    pass                     # 保存処理（未実装）

# 避けたい例：1つの関数に全部詰め込み
def do_everything(name, email):  # 役割が多すぎて把握しにくい
    pass                         # 検証も保存も全部ここに書くことになる
```

---

## エラーを適切に扱う

**try / except** で、エラーが起きたときの処理を書けます。

```python
try:
    number = int(user_input)  # 文字列を数値に変換（失敗すると ValueError）
except ValueError:           # 変換に失敗した場合の例外を捕捉
    print("数値を入力してください")  # ユーザーにエラーメッセージを表示
```

- エラーを**握りつぶさず**、ユーザーに伝えるかログに残す  
- 想定できるエラーは、**try / except** で対処する  

---

## インデントと空行

- **インデント**は 4 スペースに統一する（Python の推奨）  
- 関連する処理のまとまりの間に**空行**を入れると読みやすくなる  

```python
def process_user(user):      # ユーザー辞書を受け取る
    name = user["name"]      # 辞書から名前を取得
    age = user["age"]        # 辞書から年齢を取得

    if age >= 20:            # 20歳以上か判定
        return "成人"        # 成人と判定して返す
    else:
        return "未成年"      # 未成年と判定して返す
```

---

## まとめ

- **変数・関数の名前**は分かりやすく。小文字とアンダースコアを使う。
- **コメント**は「なぜそうしたか」が分かるように書く。
- **1つの関数は1つの役割**にし、長くなりすぎないようにする。
- **エラー**は try / except で適切に扱い、握りつぶさない。
- **インデント**は 4 スペースに統一する。

これで、Python のベストプラクティスを一通りまとめました。  
より詳しく学ぶ場合は、第5章以降（PEP 8、仮想環境、型ヒント、テストなど）を参照してください。  
実務でよく使う内容（pathlib、正規表現、map/filter/zip）は第19章〜第21章を参照してください。  
フレームワーク（Flask、Django、FastAPI、Bottle）を使う場合は、`frameworks/` フォルダのドキュメントを参照してください。
