# 用語集（NestJS）

この用語集は、本文（第1章〜第9章）で出てくる **覚えておくと読みやすくなる単語**をまとめたものです。  
「わからない単語が出たらここに戻る」ためのページとして使ってください。

---

## NestJS の土台

- **Module（モジュール）**  
  関連する機能をひとまとめにする単位です。controllers（窓口）と providers（処理）を束ねます。

- **Controller（コントローラー）**  
  「このURLにこのHTTPメソッドが来たらこの処理」を受け取る**窓口**です。中身の処理はServiceに任せます。

- **Service（サービス）**  
  ビジネスロジック（実際の中身の処理）を書く場所です。Controllerは薄く、Serviceに寄せます。

- **Provider（プロバイダ）**  
  NestJS の DI（依存性注入）で管理され、必要な場所に注入されるクラス（Service など）の総称です。

- **DI（依存性注入）**  
  「必要なものを new せず、外から渡してもらう」仕組みです。テストしやすくなります。

---

## リクエストの流れ（ざっくり）

リクエストは、概ね次の順に処理されます（細部は設定で変わります）。

1. **Middleware（ミドルウェア）**  
2. **Guard（ガード）**  
3. **Pipe（パイプ）**（バリデーション・変換など）  
4. **Interceptor（インターセプター）**（前後処理）  
5. **Controller → Service**  
6. **Exception Filter（例外フィルター）**（例外が起きたとき）

> ご質問の例：「ガード…ガードはミドルウェアの後にどうする？」  
> 典型的には **ミドルウェアの後にガード**が動き、「このルートに入ってよいか（認証/認可）」を判断します。

---

## 認証・認可

- **認証（Authentication）**  
  「誰か」を確認すること（ログイン済みか、トークンが正しいか）。

- **認可（Authorization）**  
  「その人がその操作をしてよいか」を確認すること（管理者だけ削除できる等）。

- **JWT**  
  ログイン後に発行されることが多いトークン。リクエストの `Authorization: Bearer ...` で送ります。

- **Guard（ガード）**  
  コントローラー実行前に「通してよいか」を判断する仕組み。認証（JWT）や認可（ロール）に使います。

---

## バリデーション

- **DTO**  
  受け取るデータ（リクエストボディ等）の「形」を表すクラスです。

- **ValidationPipe**  
  DTO に付けたルールに従って、入力をチェックする仕組みです。

---

## データベース

- **Entity（エンティティ）**  
  テーブル（または行）に対応するクラスです（ORM を使う場合）。

- **Repository（リポジトリ）**  
  「データの出し入れ」を担当する層です。Service から「取る/保存する」を頼まれます。

---

## エラー

- **例外（Exception）**  
  `throw` で投げるエラーのこと。NestJS は例外を HTTP レスポンスに変換できます。

- **Exception Filter（例外フィルター）**  
  例外を受け取り、レスポンス形式を統一したりログを残したりします。

