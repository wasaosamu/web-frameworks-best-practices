# 用語集（Next.js）

この用語集は、本文（第1章〜第9章）で出てくる **覚えておくと読みやすくなる単語**をまとめたものです。  
「わからない単語が出たらここに戻る」ためのページとして使ってください。

---

## ルーティング・ファイル名まわり

- **App Router**  
  Next.js の新しいルーティング方式です。`app/`（または `src/app/`）のフォルダ構造が、そのまま URL に対応します。

- **セグメント（segment）**  
  URL の区切りの1つです。例：`/products/123` の `products` と `123` がセグメントです。

- **`page.tsx`**  
  「そのURLで表示するメインの画面」を書くファイル名です。**命名は固定**（任意ではない）です。

- **`layout.tsx`**  
  「そのURL以下で共通する外枠（ヘッダー等）」を書くファイル名です。**命名は固定**です。

- **`loading.tsx`**  
  読み込み中に表示する UI を書くファイルです。**命名は固定**です。

- **`error.tsx`**  
  エラーが起きたときに表示する UI を書くファイルです。**命名は固定**です。

- **`not-found.tsx`**  
  404（見つからない）ときの UI を書くファイルです。**命名は固定**です。

- **ルートグループ（`(marketing)` のような丸括弧フォルダ）**  
  URL には出さずに、フォルダを見た目で整理するためのグルーピングです。  
  **フォルダ名は任意**（`(marketing)` でも `(public)` でもよい）です。

- **動的セグメント（`[id]`）**  
  URL の一部が変わる（例：`/products/123` の `123`）場合に使うフォルダ名です。  
  `id` の名前は任意ですが、意味が伝わる名前にします（例：`[productId]`）。

---

## Server / Client Components

- **Server Component（サーバーコンポーネント）**  
  基本はこれです。サーバー側で実行され、データ取得や SEO に向きます。

- **Client Component（クライアントコンポーネント）**  
  ブラウザ側で動くコンポーネントです。クリック・入力・状態管理（`useState`）などが必要なときだけ使います。

- **`"use client"`**  
  ファイル先頭に書く「このファイルはクライアントで動く」と宣言する合図です。  
  **付けるかどうかは設計次第（任意）**ですが、付けるとバンドルが増えやすいので「必要なときだけ」にします。

---

## データ取得・API

- **`fetch`**  
  データを取りに行く関数です。Next.js では Server Component 内の `fetch` を基本にします。

- **Route Handler（`app/api/**/route.ts`）**  
  API の窓口（HTTP リクエストを受け取る場所）です。POST/PATCH/PUT/DELETE など「変更系」をまとめます。

- **Server Actions**  
  サーバーで動く関数を、フォーム送信などから呼び出す仕組みです（変更系に向く）。

- **バリデーション**  
  入力が正しい形かチェックすることです。例：メール形式か、必須項目が空でないか。

- **認可（Authorization）**  
  「その人がその操作をしてよいか」をチェックすることです。例：管理者だけ削除できる。

- **zod**  
  受け取ったデータの形をチェックするライブラリです（バリデーションに使うことが多い）。

---

## キャッシュ

- **キャッシュ**  
  取得したデータをしばらく使い回すことです。速くなり、外部APIの負荷も減ります。

- **`revalidate`**  
  「この秒数が経ったら、次にアクセスされたときに新しいデータを取り直す」方針です。  
  秒数（例：3600）は **任意**で、データの性質に合わせて決めます。

- **`cache: "no-store"`**  
  「キャッシュを使わず、毎回最新を取りに行く」方針です。  
  管理画面や在庫のように、常に最新が必要な場合に使います。

- **ISR（Incremental Static Regeneration）**  
  「ある程度キャッシュしつつ、一定時間で更新する」考え方です。`revalidate` と関係します。

---

## セキュリティ・環境変数

- **環境変数（.env）**  
  パスワードや API キーなどの設定値を、ソースコードに直書きしないための仕組みです。

- **`NEXT_PUBLIC_`**  
  これが付く環境変数は、ブラウザ側にも埋め込まれます。  
  **公開してよい値だけ**に使い、秘密鍵などには絶対に付けません。

---

## パフォーマンス・UX

- **`next/image`（`Image` コンポーネント）**  
  画像を最適化して表示する仕組みです。基本は `<img>` ではなく `Image` を使います。

- **`next/dynamic`（遅延ロード）**  
  重いコンポーネントを「必要になったときだけ読み込む」仕組みです。初回表示が軽くなります。

---

## エラー

- **例外（throw）**  
  「ここで処理を止めてエラーとして扱う」という意思表示です。握りつぶさず、`error.tsx` でユーザー向けUIを出します。

- **ユーザー向けメッセージ / 開発者向けログ**  
  ユーザーには短く分かりやすく、開発者には調査できる情報（ログ）を残す、という分け方が大切です。

